{"version":3,"sources":["file:///Users/qinx/coding/cocos2dx/Cocos2dx-taxi/assets/script/data/GameData.ts"],"names":["_decorator","Configuration","Constants","ccclass","property","RunTimeData","instance","_instance","constructor","playerData","PlayerData","currLevel","playerInfo","level","totolMoney","money","loadFromCache","info","getConfigData","PlayerConfigID","JSON","parse","passLevel","rewarMoney","savePlayerInfoToCache","data","stringify","setConfigData"],"mappings":";;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,a,kBAAAA,a;;AACAC,MAAAA,S,cAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;6BAGjBK,W,WADZF,OAAO,CAAC,aAAD,C,mCAAR,MACaE,WADb,CACyB;AAKD,eAARC,QAAQ,GAAG;AACvB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,iBAAKA,SAAL,GAAiB,IAAIF,WAAJ,EAAjB;AACD;;AAED,iBAAO,KAAKE,SAAZ;AACD;;AAEDC,QAAAA,WAAW,GAAG;AAAA,8CAZkB,IAYlB;;AAAA,+CAIO,CAJP;;AAAA,+CAKO,CALP;;AAAA,8CAMM,IANN;;AAAA,yCAOC,CAPD;;AACZ,eAAKC,UAAL,GAAkBC,UAAU,CAACJ,QAAX,EAAlB;AACD;;AAMY,YAATK,SAAS,GAAG;AACd,iBAAO,KAAKF,UAAL,CAAgBG,UAAhB,CAA2BC,KAAlC;AACD;;AAEa,YAAVC,UAAU,GAAG;AACf,iBAAO,KAAKL,UAAL,CAAgBG,UAAhB,CAA2BG,KAAlC;AACD;;AA3BsB,O,wCAGS,I;;4BAsCrBL,U,YADZP,OAAO,CAAC,YAAD,C,sCAAR,MACaO,UADb,CACwB;AAAA;AAAA,8CAEW;AAAEK,YAAAA,KAAK,EAAE,CAAT;AAAYF,YAAAA,KAAK,EAAE;AAAnB,WAFX;AAAA;;AAMA,eAARP,QAAQ,GAAG;AACvB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,iBAAKA,SAAL,GAAiB,IAAIG,UAAJ,EAAjB;AACD;;AAED,iBAAO,KAAKH,SAAZ;AACD;;AAEMS,QAAAA,aAAa,GAAG;AACrB,gBAAMC,IAAI,GAAG;AAAA;AAAA,8CAAcX,QAAd,GAAyBY,aAAzB,CAAuC;AAAA;AAAA,sCAAUC,cAAjD,CAAb;;AACA,cAAIF,IAAJ,EAAU;AACR,iBAAKL,UAAL,GAAkBQ,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAlB;AACD;AACF;;AAEMK,QAAAA,SAAS,CAACC,UAAD,EAAqB;AACnC,eAAKX,UAAL,CAAgBC,KAAhB;AACA,eAAKD,UAAL,CAAgBG,KAAhB,IAAyBQ,UAAzB;AACA,eAAKC,qBAAL;AACD;;AAEMA,QAAAA,qBAAqB,GAAG;AAC7B,gBAAMC,IAAI,GAAGL,IAAI,CAACM,SAAL,CAAe,KAAKd,UAApB,CAAb;AACA;AAAA;AAAA,8CAAcN,QAAd,GAAyBqB,aAAzB,CAAuC;AAAA;AAAA,sCAAUR,cAAjD,EAAiEM,IAAjE;AACD;;AA9BqB,O,wCAIU,I","sourcesContent":["\nimport { _decorator, Component, Node } from 'cc';\nimport { Configuration } from './Configuration';\nimport { Constants } from './Constants';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RunTimeData')\nexport class RunTimeData {\n  public playerData: PlayerData = null;\n\n  static _instance: RunTimeData = null;\n\n  public static instance() {\n    if (!this._instance) {\n      this._instance = new RunTimeData();\n    }\n\n    return this._instance;\n  }\n\n  constructor() {\n    this.playerData = PlayerData.instance();\n  }\n\n  public curProgress = 0;\n  public maxProgress = 0;\n  public isTakeOver = true;\n  public money = 0;\n  get currLevel() {\n    return this.playerData.playerInfo.level;\n  }\n\n  get totolMoney() {\n    return this.playerData.playerInfo.money;\n  }\n\n}\n\n\n\n\n\ninterface IPlayerInfo {\n  money: number,\n  level: number,\n}\n\n@ccclass('PlayerData')\nexport class PlayerData {\n\n  public playerInfo: IPlayerInfo = { money: 0, level: 1 };\n\n  static _instance: RunTimeData = null;\n\n  public static instance() {\n    if (!this._instance) {\n      this._instance = new PlayerData();\n    }\n\n    return this._instance;\n  }\n\n  public loadFromCache() {\n    const info = Configuration.instance().getConfigData(Constants.PlayerConfigID);\n    if (info) {\n      this.playerInfo = JSON.parse(info);\n    }\n  }\n\n  public passLevel(rewarMoney: number) {\n    this.playerInfo.level++;\n    this.playerInfo.money += rewarMoney;\n    this.savePlayerInfoToCache();\n  }\n\n  public savePlayerInfoToCache() {\n    const data = JSON.stringify(this.playerInfo);\n    Configuration.instance().setConfigData(Constants.PlayerConfigID, data);\n  }\n}\n"]}