{"version":3,"sources":["file:///Users/qinx/coding/cocos2dx/Cocos2dx-taxi/assets/script/game/GameCtrl.ts"],"names":["_decorator","Component","Node","BoxCollider","Constants","AudioManager","CarManager","MapManager","ccclass","property","GameCtrl","type","onLoad","mapManager","resetMap","carManager","reset","curPath","collider","group","getComponent","setGroup","CarGroup","NORMAL","setMask","start","node","on","EventType","TOUCH_START","_touchStart","TOUCH_END","_touchEnd","playMusic","touch","event","controMoving"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAwCC,MAAAA,W,OAAAA,W;;AAC/DC,MAAAA,S,kBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,U,eAAAA,U;;AACAC,MAAAA,U,eAAAA,U;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;0BAGjBU,Q,WADZF,OAAO,CAAC,UAAD,C,UAELC,QAAQ,CAAC;AACRE,QAAAA,IAAI;AAAA;AAAA;AADI,OAAD,C,UAKRF,QAAQ,CAAC;AACRE,QAAAA,IAAI;AAAA;AAAA;AADI,OAAD,C,UAKRF,QAAQ,CAAC;AACRE,QAAAA,IAAI,EAAET;AADE,OAAD,C,oCAZX,MACaQ,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAgB/BW,QAAAA,MAAM,GAAG;AACd,eAAKC,UAAL,CAAiBC,QAAjB;AACA,eAAKC,UAAL,CAAiBC,KAAjB,CAAuB,KAAKH,UAAL,CAAiBI,OAAxC;AACA,gBAAMC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,YAAX,CAAwBjB,WAAxB,CAAjB;AACAe,UAAAA,QAAQ,CAACG,QAAT,CAAkB;AAAA;AAAA,sCAAUC,QAAV,CAAmBC,MAArC;AACAL,UAAAA,QAAQ,CAACM,OAAT,CAAiB,CAAC,CAAlB;AACD;;AAEMC,QAAAA,KAAK,GAAG;AACb,eAAKC,IAAL,CAAUC,EAAV,CAAazB,IAAI,CAAC0B,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,WAA9C,EAA2D,IAA3D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAazB,IAAI,CAAC0B,SAAL,CAAeG,SAA5B,EAAuC,KAAKC,SAA5C,EAAuD,IAAvD;AAEA;AAAA;AAAA,4CAAaC,SAAb;AACD;;AAEOH,QAAAA,WAAW,CAACI,KAAD,EAAeC,KAAf,EAAkC;AAAA;;AACnD,mCAAKpB,UAAL,sEAAiBqB,YAAjB;AACD;;AAEOJ,QAAAA,SAAS,CAACE,KAAD,EAAeC,KAAf,EAAkC;AAAA;;AACjD,oCAAKpB,UAAL,wEAAiBqB,YAAjB,CAA8B,KAA9B;AACD;;AArCqC,O;;;;;iBAIb,I;;;;;;;iBAKA,I;;;;;;;iBAKX,I","sourcesContent":["\nimport { _decorator, Component, Node, EventTouch, BoxColliderComponent, BoxCollider, Vec3 } from 'cc';\nimport { Constants } from '../data/Constants';\nimport { AudioManager } from './AudioManager';\nimport { CarManager } from './CarManager';\nimport { MapManager } from './MapManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameCtrl')\nexport class GameCtrl extends Component {\n  @property({\n    type: MapManager\n  })\n  mapManager: MapManager = null;\n\n  @property({\n    type: CarManager\n  })\n  carManager: CarManager = null;\n\n  @property({\n    type: Node,\n  })\n  group: Node = null!;\n\n  public onLoad() {\n    this.mapManager!.resetMap();\n    this.carManager!.reset(this.mapManager!.curPath);\n    const collider = this.group.getComponent(BoxCollider)!;\n    collider.setGroup(Constants.CarGroup.NORMAL);\n    collider.setMask(-1);\n  }\n\n  public start() {\n    this.node.on(Node.EventType.TOUCH_START, this._touchStart, this);\n    this.node.on(Node.EventType.TOUCH_END, this._touchEnd, this);\n\n    AudioManager.playMusic();\n  }\n\n  private _touchStart(touch: Touch, event: EventTouch) {\n    this.carManager?.controMoving();\n  }\n\n  private _touchEnd(touch: Touch, event: EventTouch) {\n    this.carManager?.controMoving(false);\n  }\n}\n\n"]}