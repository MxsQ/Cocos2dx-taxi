{"version":3,"sources":["file:///Users/qinx/coding/cocos2dx/Cocos2dx-taxi/assets/script/ui/UIManager.ts"],"names":["_decorator","find","loader","Prefab","instantiate","ccclass","property","UIManager","showDialog","name","cb","args","scriptName","substr","toUpperCase","_dictPanel","has","panel","get","parent","comp","getComponent","apply","path","loadRes","err","prefab","console","warn","set","hidDialog","Map"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, find, loader, Prefab, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('UIManager')\nexport class UIManager {\n  static _dictPanel = new Map<string, Node>();\n\n  public static showDialog(name: string, cb?: Function, ...args: any[]) {\n    const scriptName = name.substr(0, 1).toUpperCase() + name.substr(1);\n    if (this._dictPanel.has(name)) {\n      const panel = this._dictPanel.get(name);\n      const parent = find('Canvas');\n      panel!.parent = parent\n      const comp = panel?.getComponent(scriptName);\n      if (comp && comp['show']) {\n        comp['show'].apply(comp, args);\n      }\n\n      if (cb) {\n        cb();\n      }\n\n      return;\n    }\n\n    const path = `ui/${name}`\n    loader.loadRes(path, Prefab, (err, prefab) => {\n      if (err) {\n        console.warn(err);\n        return;\n      }\n\n      const panel = instantiate(prefab!);\n      this._dictPanel.set(name, panel);\n      const parent = find('Canvas');\n      panel.parent = parent;\n      const comp = panel.getComponent(scriptName);\n      if (comp && comp['show']) {\n        comp['show'].apply(comp, args);\n      }\n\n      if (cb) {\n        cb();\n      }\n    });\n\n  }\n\n  public static hidDialog(name: string, cb?: Function) {\n    if (this._dictPanel.has(name)) {\n      const panel = this._dictPanel.get(name)!;\n      const scriptName = name.substr(0, 1).toUpperCase + name.substr(1);\n      const comp = panel.getComponent(scriptName);\n      panel.parent = null;\n      if (comp && comp['hide']) {\n        comp['hide'].apply(comp);\n      }\n\n      if (cb) {\n        cb();\n      }\n    }\n  }\n\n}\n"]}