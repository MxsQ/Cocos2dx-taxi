{"version":3,"sources":["file:///Users/qinx/coding/cocos2dx/Cocos2dx-taxi/assets/script/data/GameData.ts"],"names":["_decorator","Configuration","Constants","ccclass","property","RunTimeData","instance","_instance","playerData","PlayerData","playerInfo","level","money","loadFromCache","info","getConfigData","PlayerConfigID","JSON","parse","passLevel","rewarMoney","savePlayerInfoToCache","data","stringify","setConfigData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,a,kBAAAA,a;;AACAC,MAAAA,S,cAAAA,S;;;;;;;AACDC,MAAAA,O,GAAsBH,U,CAAtBG,O;AAASC,MAAAA,Q,GAAaJ,U,CAAbI,Q;;6BAGJC,W,WADZF,OAAO,CAAC,aAAD,C;oBAMQG,Q,GAAd,oBAAyB;AACvB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,iBAAKA,SAAL,GAAiB,IAAIF,WAAJ,EAAjB;AACD;;AAED,iBAAO,KAAKE,SAAZ;AACD,S;;AAED,+BAAc;AAAA,8CAZkB,IAYlB;;AAAA,+CAIO,CAJP;;AAAA,+CAKO,CALP;;AAAA,8CAMM,IANN;;AAAA,yCAOC,CAPD;;AACZ,eAAKC,UAAL,GAAkBC,UAAU,CAACH,QAAX,EAAlB;AACD;;;;eAMD,eAAgB;AACd,mBAAO,KAAKE,UAAL,CAAgBE,UAAhB,CAA2BC,KAAlC;AACD;;;eAED,eAAiB;AACf,mBAAO,KAAKH,UAAL,CAAgBE,UAAhB,CAA2BE,KAAlC;AACD;;;;iDAxB+B,I;;4BAsCrBH,U,YADZN,OAAO,CAAC,YAAD,C;;8CAG2B;AAAES,YAAAA,KAAK,EAAE,CAAT;AAAYD,YAAAA,KAAK,EAAE;AAAnB,W;;;mBAInBL,Q,GAAd,oBAAyB;AACvB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,iBAAKA,SAAL,GAAiB,IAAIE,UAAJ,EAAjB;AACD;;AAED,iBAAO,KAAKF,SAAZ;AACD,S;;;;eAEMM,a,GAAP,yBAAuB;AACrB,cAAMC,IAAI,GAAG;AAAA;AAAA,8CAAcR,QAAd,GAAyBS,aAAzB,CAAuC;AAAA;AAAA,sCAAUC,cAAjD,CAAb;;AACA,cAAIF,IAAJ,EAAU;AACR,iBAAKJ,UAAL,GAAkBO,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAlB;AACD;AACF,S;;eAEMK,S,GAAP,mBAAiBC,UAAjB,EAAqC;AACnC,eAAKV,UAAL,CAAgBC,KAAhB;AACA,eAAKD,UAAL,CAAgBE,KAAhB,IAAyBQ,UAAzB;AACA,eAAKC,qBAAL;AACD,S;;eAEMA,qB,GAAP,iCAA+B;AAC7B,cAAMC,IAAI,GAAGL,IAAI,CAACM,SAAL,CAAe,KAAKb,UAApB,CAAb;AACA;AAAA;AAAA,8CAAcJ,QAAd,GAAyBkB,aAAzB,CAAuC;AAAA;AAAA,sCAAUR,cAAjD,EAAiEM,IAAjE;AACD,S;;;iDA1B+B,I","sourcesContent":["\nimport { _decorator, Component, Node } from 'cc';\nimport { Configuration } from './Configuration';\nimport { Constants } from './Constants';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RunTimeData')\nexport class RunTimeData {\n  public playerData: PlayerData = null;\n\n  static _instance: RunTimeData = null;\n\n  public static instance() {\n    if (!this._instance) {\n      this._instance = new RunTimeData();\n    }\n\n    return this._instance;\n  }\n\n  constructor() {\n    this.playerData = PlayerData.instance();\n  }\n\n  public curProgress = 0;\n  public maxProgress = 0;\n  public isTakeOver = true;\n  public money = 0;\n  get currLevel() {\n    return this.playerData.playerInfo.level;\n  }\n\n  get totolMoney() {\n    return this.playerData.playerInfo.money;\n  }\n\n}\n\n\n\n\n\ninterface IPlayerInfo {\n  money: number,\n  level: number,\n}\n\n@ccclass('PlayerData')\nexport class PlayerData {\n\n  public playerInfo: IPlayerInfo = { money: 0, level: 1 };\n\n  static _instance: RunTimeData = null;\n\n  public static instance() {\n    if (!this._instance) {\n      this._instance = new PlayerData();\n    }\n\n    return this._instance;\n  }\n\n  public loadFromCache() {\n    const info = Configuration.instance().getConfigData(Constants.PlayerConfigID);\n    if (info) {\n      this.playerInfo = JSON.parse(info);\n    }\n  }\n\n  public passLevel(rewarMoney: number) {\n    this.playerInfo.level++;\n    this.playerInfo.money += rewarMoney;\n    this.savePlayerInfoToCache();\n  }\n\n  public savePlayerInfoToCache() {\n    const data = JSON.stringify(this.playerInfo);\n    Configuration.instance().setConfigData(Constants.PlayerConfigID, data);\n  }\n}\n"]}