{"version":3,"sources":["file:///Users/qinx/coding/cocos2dx/Cocos2dx-taxi/assets/script/ui/ResultUI.ts"],"names":["_decorator","Component","Label","Sprite","SpriteFrame","Constants","CustomEventListener","RunTimeData","ccclass","property","ResultUI","type","displayOrder","show","runtimeData","instance","maxProgress","curProgress","index","i","progress","length","node","active","spriteFrame","isTakeOver","progress2","progress3","progress1","srcSp","levelFinished","targetSp","levelUnFinished","progressLabel","string","hide","clictBtnNormal","dispatchEvent","EventName","NEW_LEVEL","console","log"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Label, Sprite, SpriteFrame, sys } from 'cc';\nimport { Constants } from '../data/Constants';\nimport { CustomEventListener } from '../data/CustomEventListener';\nimport { RunTimeData } from '../data/GameData';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ResultUI')\nexport class ResultUI extends Component {\n\n  @property({\n    type: Label,\n    displayOrder: 1,\n  })\n  public targetLevel: Label = null!;\n\n  @property({\n    type: Label,\n    displayOrder: 2,\n  })\n  public srcLevel: Label = null!;\n\n  @property({\n    type: Sprite,\n    displayOrder: 3,\n  })\n  public targetSp: Sprite = null!;\n\n  @property({\n    type: Sprite,\n    displayOrder: 4,\n  })\n  public srcSp: Sprite = null!;\n\n  @property({\n    type: SpriteFrame,\n    displayOrder: 5,\n  })\n  public levelFinished: SpriteFrame = null!;\n\n  @property({\n    type: SpriteFrame,\n    displayOrder: 6,\n  })\n  public levelUnFinished: SpriteFrame = null!;\n\n  @property({\n    type: [Sprite],\n    displayOrder: 7,\n  })\n  public progress: Sprite[] = [];\n\n  @property({\n    type: SpriteFrame,\n    displayOrder: 8,\n  })\n  public progress1: SpriteFrame = null!;\n\n  @property({\n    type: SpriteFrame,\n    displayOrder: 9,\n  })\n  public progress2: SpriteFrame = null!;\n\n  @property({\n    type: SpriteFrame,\n    displayOrder: 10,\n  })\n  public progress3: SpriteFrame = null!;\n\n  @property({\n    type: Label,\n    displayOrder: 11,\n  })\n  public progressLabel: Label = null!;\n\n  @property({\n    type: Label,\n    displayOrder: 12,\n  })\n  public moneyLabel: Label = null!;\n\n  public show() {\n    const runtimeData = RunTimeData.instance()\n    const maxProgress = runtimeData.maxProgress;\n    const curProgress = runtimeData.curProgress;\n    let index = 0;\n\n    for (let i = 0; i < this.progress.length; i++) {\n      const progress = this.progress[i];\n      if (i >= maxProgress) {\n        progress.node.active = false;\n      } else {\n        progress.node.active = true;\n        index = maxProgress - 1 - i;\n        if (index >= curProgress) {\n          progress.spriteFrame = (index === curProgress && !runtimeData.isTakeOver)\n            ? this.progress2\n            : this.progress3;\n        } else {\n          progress.spriteFrame = this.progress1;\n        }\n      }\n    }\n\n    this.srcSp.spriteFrame = this.levelFinished;\n    this.targetSp.spriteFrame = curProgress === maxProgress\n      ? this.levelFinished\n      : this.levelUnFinished;\n    this.progressLabel.string = `你完成了${curProgress}个订单`;\n  }\n\n  public hide() {\n\n  }\n\n  public clictBtnNormal() {\n    CustomEventListener.dispatchEvent(Constants.EventName.NEW_LEVEL);\n    console.log(\"确实点到了\")\n  }\n}"]}